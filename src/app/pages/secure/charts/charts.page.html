<ion-header collapse="fade" [translucent]="true">
  <ion-toolbar color="dark">
    <ion-title color="light">Costos</ion-title>
    <ion-buttons slot="primary">
      <ion-button color="secondary" routerLink="/settings">
        <ion-icon slot="icon-only" name="cog"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-header collapse="fade" [translucent]="true">
  <ion-toolbar color="dark">
    <ion-title color="light">Costos de Producción</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header>
    <ion-toolbar class="toolbar-search">
      <ion-searchbar color="dark" showCancelButton="focus" placeholder="Buscar ..."></ion-searchbar>
    </ion-toolbar>
  </ion-header>

  <div class="ion-padding">
    <!-- Formulario para ingresar datos de producción -->
    <ion-card color="medium">
      <ion-card-header>
        <ion-card-title>Ingrese los datos de producción</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <!-- Registro de materias primas -->
        <div *ngFor="let materiaPrima of materiasPrimas; let i = index">
          <ion-item>
            <ion-label position="floating">Nombre de Materia Prima</ion-label>
            <ion-input [(ngModel)]="materiasPrimas[i].nombre" (ionChange)="calcularCostos()"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Costo</ion-label>
            <ion-input [(ngModel)]="materiasPrimas[i].costo" type="number" (ionChange)="calcularCostos()"></ion-input>
          </ion-item>
        </div>
        <ion-button color="tertiary" expand="full" (click)="agregarMateriaPrima()">Agregar Materia Prima</ion-button>

        <!-- Otros costos -->
        <div *ngFor="let otrosGasto of otrosGastos; let i = index">
          <ion-item>
            <ion-label position="floating">Nombre del Gasto</ion-label>
            <ion-input [(ngModel)]="otrosGastos[i].nombre" (ionChange)="calcularCostos()"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Otros Gastos</ion-label>
            <ion-input [(ngModel)]="otrosGastos[i].gasto" type="number" (ionChange)="calcularCostos()"></ion-input>
          </ion-item>
        </div>
        <ion-button color="tertiary" expand="full" (click)="agregarOtrosGastos()">Agregar Otro Gasto</ion-button>

        <!-- Márgenes y impuestos -->
        <ion-item>
          <ion-label position="floating">Margen de Beneficio (%)</ion-label>
          <ion-input [(ngModel)]="margenBeneficio" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Impuestos (%)</ion-label>
          <ion-input [(ngModel)]="impuestos" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>

        <!-- Resultados -->
        <ion-item color="medium" *ngIf="costoProduccion !== null">
          <ion-label>Costo de Producción</ion-label>
          <ion-badge  slot="end">{{ costoProduccion | currency }}</ion-badge>
        </ion-item>
        <ion-item color="medium" *ngIf="costoFabrica !== null">
          <ion-label>Costo de Fábrica</ion-label>
          <ion-badge  slot="end">{{ costoFabrica | currency }}</ion-badge>
        </ion-item>
        <ion-item color="medium" *ngIf="costoDistribucion !== null">
          <ion-label>Costo de Distribución</ion-label>
          <ion-badge  slot="end">{{ costoDistribucion | currency }}</ion-badge>
        </ion-item>
        <ion-item color="medium" *ngIf="pvp !== null">
          <ion-label>PVP</ion-label>
          <ion-badge color="success" slot="end">{{ pvp | currency }}</ion-badge>
        </ion-item>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>