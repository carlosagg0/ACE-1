<ion-header collapse="fade" [translucent]="true">
  <ion-toolbar color="dark">
    <ion-title color="light">
      Charts
    </ion-title>
    <ion-buttons slot="primary">
      <ion-button color="secondary" routerLink="/settings">
        <ion-icon slot="icon-only" name="cog"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-header collapse="fade" [translucent]="true">
  <ion-toolbar color="dark">
    <ion-title color="light">
      PVP de Producción
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header>
    <ion-toolbar class="toolbar-search">
      <ion-searchbar color="dark" showCancelButton="focus" placeholder="Buscar ..."></ion-searchbar>
    </ion-toolbar>
  </ion-header>

  <div class="ion-padding">
    <!-- Formulario para ingresar datos de producción -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Ingrese los datos de producción</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <!-- Registro de materias primas -->
        <div *ngFor="let materiaPrima of materiasPrimas; let i = index">
          <ion-item>
            <ion-label position="floating">Nombre de Materia Prima</ion-label>
            <ion-input [(ngModel)]="materiasPrimas[i].nombre" (ionChange)="calcularCostos()"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Costo</ion-label>
            <ion-input [(ngModel)]="materiasPrimas[i].costo" type="number" (ionChange)="calcularCostos()"></ion-input>
          </ion-item>
        </div>
        <ion-button expand="full" (click)="agregarMateriaPrima()">Agregar Materia Prima</ion-button>

        <!-- Otros costos -->
        <ion-item>
          <ion-label position="floating">Otros Costos</ion-label>
          <ion-input [(ngModel)]="otrosCostos" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>

        <!-- Costo de fábrica -->
        <ion-item>
          <ion-label position="floating">Costo de Fábrica</ion-label>
          <ion-input [(ngModel)]="costoFabrica" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>

        <!-- Costo de distribución -->
        <ion-item>
          <ion-label position="floating">Costo de Distribución</ion-label>
          <ion-input [(ngModel)]="costoDistribucion" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>

        <!-- Márgenes y impuestos -->
        <ion-item>
          <ion-label position="floating">Margen de Beneficio (%)</ion-label>
          <ion-input [(ngModel)]="margenBeneficio" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Impuestos (%)</ion-label>
          <ion-input [(ngModel)]="impuestos" type="number" (ionChange)="calcularCostos()"></ion-input>
        </ion-item>

        <!-- Resultados -->
        <ion-item *ngIf="costoProduccion !== null">
          <ion-label>Costo de Producción</ion-label>
          <ion-note slot="end">{{ costoProduccion | currency }}</ion-note>
        </ion-item>
        <ion-item *ngIf="costoTotalFabrica !== null">
          <ion-label>Costo Total de Fábrica</ion-label>
          <ion-note slot="end">{{ costoTotalFabrica | currency }}</ion-note>
        </ion-item>
        <ion-item *ngIf="costoTotalDistribucion !== null">
          <ion-label>Costo Total de Distribución</ion-label>
          <ion-note slot="end">{{ costoTotalDistribucion | currency }}</ion-note>
        </ion-item>
        <ion-item *ngIf="pvp !== null">
          <ion-label>Precio de Venta al Público (PVP)</ion-label>
          <ion-note slot="end">{{ pvp | currency }}</ion-note>
        </ion-item>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
